{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$comment": "generated by the ocm schema generation tool",
  "$id": "ocm.software/open-component-model/bindings/go/oci/spec/repository/v1/oci/schemas/Repository.schema.json",
  "title": "Repository",
  "type": "object",
  "description": "Repository is a type that represents an OCI repository as per\nhttps://github.com/opencontainers/distribution-spec\n\nIt is not only used to specify the full OCI compliant repository namespace, but also contains\na full URL in which the scheme can indicate support for https or http. the oci scheme is also recognized.\nAdditionally, the port can be used to specify a port for the repository.\nNote that any path here is used to specify the root path of the OCI Repository.",
  "properties": {
    "baseUrl": {
      "type": "string",
      "description": "BaseURL is the base url of the OCI registry (host + optional port).\nShould not include repository paths - use SubPath for that.\n\nExamples:\n- \"https://registry.example.com\"\n- \"https://registry.example.com:5000\"\n- \"oci://registry.example.com:5000\"\n- \"docker.io\"\n- \"ghcr.io\"\n\nIf BaseUrl contains a path (e.g., \"ghcr.io/org/repo\"),\nthe path will be auto-extracted and used as SubPath."
    },
    "subPath": {
      "type": "string",
      "description": "SubPath is an optional repository prefix path used for the OCM repository.\nThe OCM-based artifacts will use this path as a repository prefix.\nAn OCI registry may host many OCM repositories with different repository prefixes.\n\nAuto-extraction: If not specified and BaseUrl contains a path component,\nthe path will be automatically extracted and used as SubPath.\n\nExamples:\nExplicit separation:\nBaseUrl=\"ghcr.io\" + SubPath=\"open-component-model/ocm\"\n→ Registry: ghcr.io, Repository prefix: open-component-model/ocm\n\nEmbedded path:\nBaseUrl=\"ghcr.io/open-component-model/ocm\" + SubPath=\"\"\n→ Auto-extracts to: BaseUrl=\"ghcr.io\", SubPath=\"open-component-model/ocm\""
    },
    "type": {
      "$ref": "#/$defs/ocm.software.open-component-model.bindings.go.runtime.Type",
      "oneOf": [
        {
          "const": "OCIRepository/v1"
        },
        {
          "const": "OCI/v1"
        },
        {
          "const": "oci/v1"
        },
        {
          "const": "OCIRegistry/v1"
        },
        {
          "const": "ociRegistry/v1"
        },
        {
          "deprecated": true,
          "const": "OCIRepository"
        },
        {
          "deprecated": true,
          "const": "OCI"
        },
        {
          "deprecated": true,
          "const": "oci"
        },
        {
          "deprecated": true,
          "const": "OCIRegistry"
        },
        {
          "deprecated": true,
          "const": "ociRegistry"
        }
      ]
    }
  },
  "required": [
    "type",
    "baseUrl"
  ],
  "additionalProperties": false,
  "$defs": {
    "ocm.software.open-component-model.bindings.go.runtime.Type": {
      "$schema": "https://json-schema.org/draft/2020-12/schema",
      "$comment": "this core runtime schema was automatically included by the ocm schema generation tool to allow introspection",
      "title": "Type",
      "type": "string",
      "description": "Type represents a structured type with an optional version and a name. It is used to identify the type of an object in a versioned API.",
      "pattern": "^([a-zA-Z0-9][a-zA-Z0-9.]*)(?:/(v[0-9]+(?:alpha[0-9]+|beta[0-9]+)?))?$"
    }
  },
  "x-docs": {
    "diataxis": {
      "explanation": [
        {
          "content": "# OCI Repository\n\nAn **OCI repository** in OCM is a structured representation of a repository namespace hosted by an OCI-compatible registry, as defined by the OCI Distribution Specification.\n\n---\n\n## Purpose\n\nOCM models an OCI repository explicitly to avoid ambiguity between:\n\n- **Registry endpoint** (host, scheme, port)\n- **Repository namespace** (path within the registry)\n\nThis enables consistent addressing, validation, and tooling behavior.\n\n---\n\n## Structure\n\nAn OCM OCI repository is defined by two parts:\n\n- **BaseURL**  \n  The registry endpoint (e.g. `ghcr.io`, `https://registry.example.com:5000`)\n\n- **SubPath**  \n  The repository namespace within the registry (e.g. `open-component-model/ocm`)\n\nTogether, they uniquely identify the repository location.\n\n---\n\n## Why This Matters\n\nExplicit repository modeling allows OCM to:\n\n- Normalize user input (embedded paths vs. explicit subpaths)\n- Support multiple repositories per registry\n- Reason about transfers, mirroring, and relocation\n- Avoid implicit parsing rules in higher-level tooling\n\n---\n\n## Usage\n\nOCI repositories are used whenever OCM:\n\n- Pushes or pulls component versions\n- Resolves component references\n- Transfers components between registries\n\nThey are **configuration objects**, not artifacts.\n\n---\n\n## Summary\n\nAn OCM OCI repository:\n\n- Represents an OCI repository namespace explicitly\n- Separates registry endpoint from repository path\n- Provides a stable abstraction for OCM tooling\n- Remains fully compatible with OCI semantics",
          "audience": [
            "user",
            "implementer"
          ]
        }
      ]
    }
  }
}